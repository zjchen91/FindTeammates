{% extends "FindTeammates/base.html" %}

{% block content %}

 <script type="text/javascript">
    $(document).ready(function() {
        $("input[name=join]").click(function() {
            //var input_string = $("#forminput").val();
            console.log('yay');
            alert("Sent join request successfully!");
            $.ajax({
                url : "../joinHis", 
                type : "POST",
                dataType: "json", 
                data : {
                    client_response : this.id,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    success : function(json) {
                        alert("success");
                        $('#result').append( 'Server Response: ' + json.server_response);
                    },
                    error : function(xhr,errmsg,err) {
                        //alert(xhr.status + ": " + xhr.responseText);
                    }
            });
            return false;
        });
    });
</script>
    <!-- Page Content -->
<div class="container">

    <!-- Jumbotron Header -->
    <header class="jumbotron hero-spacer">
        
        <p>
            <button type="submit" class="btn btn-primary btn-large" onclick="window.location.href='../openteam'">Create a Team Now</button>
        </p>
    </header>

    <hr>


    <!-- Page Features -->
    <div class="row text-center">
    {% if team_list.0 %}
        {% for team, rate in team_list %}
        <div class="col-md-3 col-sm-6 hero-feature">
            <div class="thumbnail">
                <img src="../../static/FindTeammates/img/default_team_image.jpg" alt="">
                <div class="caption">
                    <h3><a href="/FindTeammates/team_detail/{{team.id}}/">{{ team.teamName }}</a></h3>
                    <h4> Team Leader: {{team.ownerID.name}}</h4>
                    <h4> recommended rate: {{rate}}</h4>

                    <form method="post" name="" >
                        {% csrf_token %}
                        <input id={{ team.id }} name="join" type="button" class="btn btn-primary btn-large" value="Join"></input>
                    </form> 
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No plans are available.</p>
    {% endif %}
</div>

<hr>
{% endblock %}


